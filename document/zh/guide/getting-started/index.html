<!DOCTYPE html><html lang="zh-CN" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-zuf6obux"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>快速入门 | Danmu 💬</title><link rel="canonical"/><link rel="shortcut icon" href="/danmu/document/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v4.12.2"/><meta name="generator" content="Starlight v0.25.2"/><meta property="og:title" content="快速入门"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="zh-CN"/><meta property="og:description" content="学习如何开始使用 Danmaku"/><meta property="og:site_name" content="Danmu 💬"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="快速入门"/><meta name="twitter:description" content="学习如何开始使用 Danmaku"/><meta name="description" content="学习如何开始使用 Danmaku"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/danmu/document/_astro/index.B5zOZ_ET.css">
<style>:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-dcud3tbg){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-dcud3tbg){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-dcud3tbg){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-dcud3tbg){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-dcud3tbg){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-dcud3tbg){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-dcud3tbg){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-dcud3tbg){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-dcud3tbg){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-dcud3tbg){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-dcud3tbg){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-dcud3tbg){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-dcud3tbg){vertical-align:middle}
.card-grid:where(.astro-hjbxmflx){display:grid;gap:1rem}.card-grid:where(.astro-hjbxmflx)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-hjbxmflx){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-hjbxmflx){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-hjbxmflx)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}
.card:where(.astro-q3llvggr){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-q3llvggr):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-q3llvggr):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-q3llvggr):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-q3llvggr):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-q3llvggr){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-q3llvggr) .icon:where(.astro-q3llvggr){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem}.card:where(.astro-q3llvggr) .body:where(.astro-q3llvggr){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}
svg:where(.astro-gaoqc6fi){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}
starlight-tabs:where(.astro-czm6zsmz){display:block}.tablist-wrapper:where(.astro-czm6zsmz){overflow-x:auto}:where(.astro-czm6zsmz)[role=tablist]{display:flex;list-style:none;border-bottom:2px solid var(--sl-color-gray-5);padding:0}.tab:where(.astro-czm6zsmz){margin-bottom:-2px}.tab:where(.astro-czm6zsmz)>:where(.astro-czm6zsmz)[role=tab]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;text-decoration:none;border-bottom:2px solid var(--sl-color-gray-5);color:var(--sl-color-gray-3);outline-offset:var(--sl-outline-offset-inside);overflow-wrap:initial}.tab:where(.astro-czm6zsmz) :where(.astro-czm6zsmz)[role=tab][aria-selected=true]{color:var(--sl-color-white);border-color:var(--sl-color-text-accent);font-weight:600}.tablist-wrapper:where(.astro-czm6zsmz)~[role=tabpanel]{margin-top:1rem}
.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:not(:last-of-type):after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}
</style><script type="module" src="/danmu/document/_astro/hoisted.tHllY7na.js"></script>
<script type="module" src="/danmu/document/_astro/page.LS5KDvwX.js"></script><script src="/danmu/document/_astro/Tabs.astro_astro_type_script_index_0_lang.CCIyraCc.js" type="module"></script></head> <body class="astro-zuf6obux"> <a href="#_top" class="astro-muwy3eg2">跳转到内容</a>  <div class="page sl-flex astro-jtvym3i5"> <header class="header astro-jtvym3i5"><div class="header sl-flex astro-yckaiudh"> <div class="title-wrapper sl-flex astro-yckaiudh"> <a href="/danmu/document/zh" class="site-title sl-flex astro-gbpev5bs">  <span class="astro-gbpev5bs"> Danmu 💬 </span> </a>  </div> <div class="sl-flex astro-yckaiudh"> <site-search data-translations="{&#34;placeholder&#34;:&#34;搜索&#34;}" class="astro-6wmge5rq"> <button data-open-modal disabled aria-label="搜索" aria-keyshortcuts="Control+K" class="astro-6wmge5rq"> <svg aria-hidden="true" class="astro-6wmge5rq astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-6wmge5rq" aria-hidden="true">搜索</span> <kbd class="sl-hidden md:sl-flex astro-6wmge5rq" style="display: none;"> <kbd class="astro-6wmge5rq">Ctrl</kbd><kbd class="astro-6wmge5rq">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="搜索" class="astro-6wmge5rq"> <div class="dialog-frame sl-flex astro-6wmge5rq">  <button data-close-modal class="sl-flex md:sl-hidden astro-6wmge5rq"> 取消 </button> <div class="search-container astro-6wmge5rq"> <div id="starlight__search" class="astro-6wmge5rq"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script>    </div> <div class="sl-hidden md:sl-flex right-group astro-yckaiudh"> <div class="sl-flex social-icons astro-yckaiudh"> <a href="https://github.com/imtaotao/danmu" rel="me" class="sl-flex astro-k6ii4dyi"><span class="sr-only astro-k6ii4dyi">GitHub</span><svg aria-hidden="true" class="astro-k6ii4dyi astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-rapide-theme-select class="astro-t26hk5j3"> <button aria-label="选择主题" aria-live="polite" class="sl-flex astro-t26hk5j3" title="选择主题"> <svg aria-hidden="true" height="16" viewBox="0 0 24 24" width="16" class="astro-t26hk5j3"> <mask class="moon astro-t26hk5j3" id="moon-mask-be103553"> <rect x="0" y="0" width="100%" height="100%" fill="white" class="astro-t26hk5j3"></rect> <circle cx="24" cy="10" r="6" fill="black" class="astro-t26hk5j3"></circle> </mask> <circle class="sun astro-t26hk5j3" cx="12" cy="12" r="6" mask="url(#moon-mask-be103553)"></circle> <g class="sun-beams astro-t26hk5j3" stroke="currentColor"> <line x1="12" y1="1" x2="12" y2="3" class="astro-t26hk5j3"></line> <line x1="12" y1="21" x2="12" y2="23" class="astro-t26hk5j3"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="astro-t26hk5j3"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="astro-t26hk5j3"></line> <line x1="1" y1="12" x2="3" y2="12" class="astro-t26hk5j3"></line> <line x1="21" y1="12" x2="23" y2="12" class="astro-t26hk5j3"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="astro-t26hk5j3"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="astro-t26hk5j3"></line> </g> </svg> </button> </starlight-rapide-theme-select>   <script>
  StarlightThemeProvider.updatePickers()
</script>   </div> </div> </header> <nav class="sidebar astro-jtvym3i5" aria-label="主要"> <starlight-menu-button class="astro-k2ihfk2b"> <button aria-expanded="false" aria-label="菜单" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-k2ihfk2b"> <svg aria-hidden="true" class="astro-k2ihfk2b astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-jtvym3i5"> <div class="sidebar-content sl-flex astro-jtvym3i5"> <ul class="top-level astro-n3en4ro3"> <li class="astro-n3en4ro3"> <details open class="astro-n3en4ro3"> <summary class="astro-n3en4ro3"> <div class="group-label astro-n3en4ro3"> <span class="large astro-n3en4ro3">指南</span>  </div> <svg aria-hidden="true" class="caret astro-n3en4ro3 astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-n3en4ro3"> <li class="astro-n3en4ro3"> <a href="/danmu/document/zh/guide/getting-started/" aria-current="page" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">快速入门</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/guide/typescript-interface/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">TypeScript 类型</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/guide/create-plugin/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">编写插件</span>  </a> </li> </ul>  </details> </li><li class="astro-n3en4ro3"> <details open class="astro-n3en4ro3"> <summary class="astro-n3en4ro3"> <div class="group-label astro-n3en4ro3"> <span class="large astro-n3en4ro3">参考</span>  </div> <svg aria-hidden="true" class="caret astro-n3en4ro3 astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-n3en4ro3"> <li class="astro-n3en4ro3"> <a href="/danmu/document/zh/reference/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">概览</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/reference/manager-config/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">全局配置</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/reference/manager-hooks/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">全局钩子</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/reference/manager-api/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">全局 API</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/reference/danmaku-hooks/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">弹幕钩子</span>  </a> </li><li class="astro-n3en4ro3"> <a href="/danmu/document/zh/reference/danmaku-api/" class="astro-n3en4ro3"> <span class="astro-n3en4ro3">弹幕 API</span>  </a> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-dlf5bvtl"> <div class="sl-flex social-icons astro-dlf5bvtl"> <a href="https://github.com/imtaotao/danmu" rel="me" class="sl-flex astro-k6ii4dyi"><span class="sr-only astro-k6ii4dyi">GitHub</span><svg aria-hidden="true" class="astro-k6ii4dyi astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-rapide-theme-select class="astro-t26hk5j3"> <button aria-label="选择主题" aria-live="polite" class="sl-flex astro-t26hk5j3" title="选择主题"> <svg aria-hidden="true" height="16" viewBox="0 0 24 24" width="16" class="astro-t26hk5j3"> <mask class="moon astro-t26hk5j3" id="moon-mask-397e204b"> <rect x="0" y="0" width="100%" height="100%" fill="white" class="astro-t26hk5j3"></rect> <circle cx="24" cy="10" r="6" fill="black" class="astro-t26hk5j3"></circle> </mask> <circle class="sun astro-t26hk5j3" cx="12" cy="12" r="6" mask="url(#moon-mask-397e204b)"></circle> <g class="sun-beams astro-t26hk5j3" stroke="currentColor"> <line x1="12" y1="1" x2="12" y2="3" class="astro-t26hk5j3"></line> <line x1="12" y1="21" x2="12" y2="23" class="astro-t26hk5j3"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="astro-t26hk5j3"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="astro-t26hk5j3"></line> <line x1="1" y1="12" x2="3" y2="12" class="astro-t26hk5j3"></line> <line x1="21" y1="12" x2="23" y2="12" class="astro-t26hk5j3"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="astro-t26hk5j3"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="astro-t26hk5j3"></line> </g> </svg> </button> </starlight-rapide-theme-select>   <script>
  StarlightThemeProvider.updatePickers()
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-jtvym3i5">  <div class="lg:sl-flex astro-4etuzk2r"> <aside class="right-sidebar-container astro-4etuzk2r"> <div class="right-sidebar astro-4etuzk2r"> <div class="lg:sl-hidden astro-2kjrb7dn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-w6njont6"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-w6njont6"><details id="starlight__mobile-toc" class="astro-w6njont6"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-w6njont6"><div class="toggle sl-flex astro-w6njont6">本页内容<svg aria-hidden="true" class="caret astro-w6njont6 astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-w6njont6"></span></summary><div class="dropdown astro-w6njont6"><ul class="isMobile astro-bfmgl4eb" style="--depth: 0;"> <li class="astro-bfmgl4eb" style="--depth: 0;"> <a href="#_top" class="astro-bfmgl4eb" style="--depth: 0;"> <span class="astro-bfmgl4eb" style="--depth: 0;">概述</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 0;"> <a href="#为什么选择-danmu" class="astro-bfmgl4eb" style="--depth: 0;"> <span class="astro-bfmgl4eb" style="--depth: 0;">为什么选择 danmu ?</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 0;"> <a href="#快速开始" class="astro-bfmgl4eb" style="--depth: 0;"> <span class="astro-bfmgl4eb" style="--depth: 0;">快速开始</span> </a> <ul class="isMobile astro-bfmgl4eb" style="--depth: 1;"> <li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#1-安装依赖" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">1. 安装依赖</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#2-创建-manager" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">2. 创建 manager</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#3-挂载并渲染" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">3. 挂载并渲染</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#4-发送普通弹幕" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">4. 发送普通弹幕</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#5-发送高级弹幕" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">5. 发送高级弹幕</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-2kjrb7dn"><div class="sl-container astro-2kjrb7dn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">本页内容</h2><ul class="astro-bfmgl4eb" style="--depth: 0;"> <li class="astro-bfmgl4eb" style="--depth: 0;"> <a href="#_top" class="astro-bfmgl4eb" style="--depth: 0;"> <span class="astro-bfmgl4eb" style="--depth: 0;">概述</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 0;"> <a href="#为什么选择-danmu" class="astro-bfmgl4eb" style="--depth: 0;"> <span class="astro-bfmgl4eb" style="--depth: 0;">为什么选择 danmu ?</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 0;"> <a href="#快速开始" class="astro-bfmgl4eb" style="--depth: 0;"> <span class="astro-bfmgl4eb" style="--depth: 0;">快速开始</span> </a> <ul class="astro-bfmgl4eb" style="--depth: 1;"> <li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#1-安装依赖" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">1. 安装依赖</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#2-创建-manager" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">2. 创建 manager</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#3-挂载并渲染" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">3. 挂载并渲染</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#4-发送普通弹幕" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">4. 发送普通弹幕</span> </a>  </li><li class="astro-bfmgl4eb" style="--depth: 1;"> <a href="#5-发送高级弹幕" class="astro-bfmgl4eb" style="--depth: 1;"> <span class="astro-bfmgl4eb" style="--depth: 1;">5. 发送高级弹幕</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-4etuzk2r">  <main data-pagefind-body lang="zh-CN" dir="ltr" class="astro-zuf6obux">    <div class="content-panel astro-cbuafg7d"> <div class="sl-container astro-cbuafg7d"> <div class="sl-rapide-banner astro-aeh3evr3"><a href="https://www.npmjs.com/package/danmu">danmu</a> 目前还没有到 v1.0 版本，不要使用未公开的 API，如果您发现任何错误或意外情况，请在 <a href="https://github.com/imtaotao/danmu/issues/new">GitHub 上创建 issues</a>。
</div> <h1 id="_top" class="astro-zrdhu36i">快速入门</h1>  </div> </div>  <div class="content-panel astro-cbuafg7d"> <div class="sl-container astro-cbuafg7d"> <div class="sl-markdown-content"> <p><code dir="auto">danmu</code> 是一个<strong>高度可扩展，功能丰富齐全</strong>的弹幕库，为开发者提供便捷接入和编写自定义插件的能力，满足复杂的需求同时也允许极致的定制化。我们建立了一个<a href="https://imtaotao.github.io/danmu/"><strong>示例站点</strong></a>，你可以在此看到一些效果。</p>
<h2 id="为什么选择-danmu">为什么选择 <code dir="auto">danmu</code> ?</h2>
<p>现代的视频网站或多或少的都有添加弹幕功能，弹幕可以带来一系列不同的观影体验，实现一个好用，功能齐全的弹幕库并不是一件容易的事情，市面上有很多不同的弹幕库选择，但是大多数都依赖都是基于 <code dir="auto">Canvas</code> 来实现的，这导致样式的绘制会很局限，并且没有什么手段进行扩展，这对后续的迭代来说是致命的，因为换一个库来实现，成本很高。</p>
<p><code dir="auto">danmu</code> 基于 <code dir="auto">CSS + DOM</code> 来绘制弹幕，这意味着，弹幕的运动可以基于浏览器原生的动画能力，并且 <code dir="auto">CSS + DOM</code> 可以做的事情格外的多，这让不同形式的弹幕都得以存在（想象一下一个弹幕嵌入一个网页的场景）。并且我们提供的弹幕的碰撞计算，弹幕的运动速率可以不是固定的但是也能不会互相碰撞。</p>
<h2 id="快速开始">快速开始</h2>
<h3 id="1-安装依赖">1. 安装依赖</h3>
<p>你可以使用您喜欢的包管理器在项目的依赖项中安装 <code dir="auto">danmu</code>，从而将 Danmaku 添加到您现有的项目当中：</p>
<starlight-tabs class="astro-czm6zsmz"> <div class="tablist-wrapper not-content astro-czm6zsmz"> <ul role="tablist" class="astro-czm6zsmz"> <li role="presentation" class="tab astro-czm6zsmz"> <a role="tab" href="#tab-panel-0" id="tab-0" aria-selected="true" tabindex="0" class="astro-czm6zsmz"> <svg aria-hidden="true" class="astro-czm6zsmz astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M24 7.296L0 7.296L0 15.296L6.816 15.296L6.816 16.704L12.096 16.704L12.096 15.392L24 15.392L24 7.296ZM6.592 8.704L6.592 13.984L5.312 13.984L5.312 10.112L4 10.112L4 13.984L1.312 13.984L1.312 8.704L6.592 8.704ZM13.184 13.984L13.216 13.984L10.496 13.984L10.496 15.392L7.808 15.392L7.808 8.800L13.088 8.800Q13.216 10.400 13.184 13.984L13.184 13.984ZM22.592 8.704L22.592 13.984L21.312 13.984L21.312 10.112L20 10.112L20 13.984L18.592 13.984L18.592 10.112L17.312 10.112L17.312 13.984L14.592 13.984L14.592 8.704L22.592 8.704ZM11.904 12.704L11.904 10.112L10.592 10.112L10.592 12.704L11.904 12.704Z"/></svg>  npm </a> </li><li role="presentation" class="tab astro-czm6zsmz"> <a role="tab" href="#tab-panel-1" id="tab-1" aria-selected="false" tabindex="-1" class="astro-czm6zsmz"> <svg aria-hidden="true" class="astro-czm6zsmz astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M0 0v7.5h7.5V0H0Zm8.25 0v7.5h7.498V0H8.25Zm8.25 0v7.5H24V0h-7.5ZM8.25 8.25v7.5h7.498v-7.5H8.25Zm8.25 0v7.5H24v-7.5h-7.5ZM0 16.5V24h7.5v-7.5H0Zm8.25 0V24h7.498v-7.5H8.25Zm8.25 0V24H24v-7.5h-7.5Z"/></svg>  pnpm </a> </li><li role="presentation" class="tab astro-czm6zsmz"> <a role="tab" href="#tab-panel-2" id="tab-2" aria-selected="false" tabindex="-1" class="astro-czm6zsmz"> <svg aria-hidden="true" class="astro-czm6zsmz astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M6.729 21.545L6.729 21.545Q6.393 21.377 6.225 21.041L6.225 21.041Q6.099 20.915 6.078 20.915Q6.057 20.915 5.973 21.041Q5.889 21.167 5.826 21.419Q5.763 21.671 5.679 21.839L5.679 21.839Q5.385 22.805 4.839 23.141Q4.293 23.477 3.327 23.267L3.327 23.267Q3.075 23.267 2.529 23.015L2.529 23.015Q1.731 22.595 2.151 21.839L2.151 21.839Q2.151 21.755 2.214 21.629Q2.277 21.503 2.277 21.419L2.277 21.419Q1.563 21.419 1.353 20.789L1.353 20.789Q0.849 19.445 1.017 18.416Q1.185 17.387 2.151 16.421L2.151 16.421L2.235 16.253Q2.403 15.959 2.403 15.791L2.403 15.791Q2.403 14.363 2.697 13.313L2.697 13.313Q3.033 12.053 3.831 11.045L3.831 11.045Q4.503 10.163 5.427 9.617L5.427 9.617Q5.595 9.533 5.616 9.407Q5.637 9.281 5.553 9.071L5.553 9.071Q4.839 8.189 4.629 6.971L4.629 6.971Q4.545 6.635 4.671 6.215L4.671 6.215Q4.755 5.921 5.007 5.417L5.007 5.417L5.175 5.039Q5.427 4.745 5.553 4.745L5.553 4.745Q5.931 4.661 6.561 4.199L6.561 4.199L6.855 3.989Q8.157 2.645 10.131 2.645L10.131 2.645Q10.341 2.645 10.446 2.582Q10.551 2.519 10.551 2.393L10.551 2.393Q10.719 1.595 11.307 0.839L11.307 0.839L11.727 0.419Q11.937 0.209 12.168 0.230Q12.399 0.251 12.525 0.545L12.525 0.545Q12.777 1.007 13.155 1.847L13.155 1.847L13.407 2.393Q13.617 2.729 13.827 2.519L13.827 2.519Q14.331 2.309 14.499 2.288Q14.667 2.267 14.751 2.393Q14.835 2.519 15.003 3.065L15.003 3.065Q16.011 7.265 13.701 10.919L13.701 10.919Q13.617 11.045 13.428 11.318Q13.239 11.591 13.155 11.759Q13.071 11.927 13.092 12.053Q13.113 12.179 13.281 12.389L13.281 12.389Q14.163 13.145 14.751 14.195Q15.339 15.245 15.507 16.421L15.507 16.421Q15.717 17.891 15.507 19.319L15.507 19.319Q15.423 19.697 15.507 19.760Q15.591 19.823 15.927 19.739L15.927 19.739Q17.397 19.277 18.531 18.521L18.531 18.521L18.867 18.353Q19.623 17.891 20.043 17.723L20.043 17.723Q20.673 17.429 21.303 17.345L21.303 17.345L21.681 17.345Q22.101 17.261 22.374 17.366Q22.647 17.471 22.836 17.723Q23.025 17.975 23.025 18.269L23.025 18.269Q23.025 18.857 22.353 19.067L22.353 19.067Q20.631 19.403 18.804 20.726Q16.977 22.049 14.457 22.721L14.457 22.721Q14.373 22.721 14.205 22.805Q14.037 22.889 13.953 23.015L13.953 23.015Q13.659 23.225 13.323 23.309L13.323 23.309Q13.113 23.393 12.651 23.435L12.651 23.435L12.231 23.519L11.895 23.561Q9.375 23.771 8.031 23.771L8.031 23.771Q7.275 23.771 6.729 23.645L6.729 23.645Q5.973 23.393 5.805 22.889L5.805 22.889Q5.595 22.091 6.225 21.671L6.225 21.671Q6.351 21.671 6.519 21.608Q6.687 21.545 6.729 21.545Z"/></svg>  Yarn </a> </li> </ul> </div> <section id="tab-panel-0" aria-labelledby="tab-0" role="tabpanel"> <div class="expressive-code"><link rel="stylesheet" href="/danmu/document/_astro/ec.e0ij3.css"><script type="module" src="/danmu/document/_astro/ec.3zb7u.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#80A665;--1:#4B7231">npm</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7D;--1:#96574A">install</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7D;--1:#96574A">danmu</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install danmu"><div></div></button></div></figure></div> </section><section id="tab-panel-1" aria-labelledby="tab-1" role="tabpanel" hidden> <div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#80A665;--1:#4B7231">pnpm</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7D;--1:#96574A">install</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7D;--1:#96574A">danmu</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pnpm install danmu"><div></div></button></div></figure></div> </section><section id="tab-panel-2" aria-labelledby="tab-2" role="tabpanel" hidden> <div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#80A665;--1:#4B7231">yarn</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7D;--1:#96574A">add</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7D;--1:#96574A">danmu</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="yarn add danmu"><div></div></button></div></figure></div> </section> </starlight-tabs>  
<p>我们也提供了 <code dir="auto">CDN</code> 供你来开发调试，<strong>不要在生产环境使用此 <code dir="auto">CDN</code></strong>：</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">index.html</span></figcaption><pre data-language="html"><code><div class="ec-line"><div class="code"><span style="--0:#8B8B8B;--1:#686868">&#x3C;</span><span style="--0:#55987B;--1:#1E754F">script</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#BD976A;--1:#876037">src</span><span style="--0:#8B8B8B;--1:#686868">=</span><span style="--0:#C98A7DE4;--1:#96574AFD">"</span><span style="--0:#C98A7D;--1:#96574A">https://unpkg.com/danmu/dist/danmu.umd.js</span><span style="--0:#C98A7DE4;--1:#96574AFD">"</span><span style="--0:#8B8B8B;--1:#686868">>&#x3C;/</span><span style="--0:#55987B;--1:#1E754F">script</span><span style="--0:#8B8B8B;--1:#686868">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<script src=&#x22;https://unpkg.com/danmu/dist/danmu.umd.js&#x22;></script>"><div></div></button></div></figure></div>
<h3 id="2-创建-manager">2. 创建 <code dir="auto">manager</code></h3>
<p><code dir="auto">danmu</code> 核心包只暴露了一个 <code dir="auto">create</code> 方法，用来创建一个 <code dir="auto">manager</code> 实例，是的，我们所有的实现都是多实例的方式实现的，创建的时候传入的配置可以看<a href="../../reference/manager-config"><strong>配置</strong></a>这一章节的介绍。</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">init.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#55987B;--1:#1E754F">import</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#8B8B8B;--1:#686868">{</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#BD976A;--1:#876037">create</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#8B8B8B;--1:#686868">}</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#55987B;--1:#1E754F">from</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">danmu</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#818F81FE;--1:#636B63">// 在此处创建一个 manager 实例，如果不传递则会使用默认的配置</span></div></div><div class="ec-line"><div class="code"><span style="--0:#818F81FE;--1:#636B63">// plugin 参数是需要特殊注意的，他是在创建 manager 时默认的插件</span></div></div><div class="ec-line"><div class="code"><span style="--0:#CB7676;--1:#9E5252">const </span><span style="--0:#BD976A;--1:#876037">manager</span><span style="--0:#CB7676;--1:#9E5252"> </span><span style="--0:#8B8B8B;--1:#686868">=</span><span style="--0:#CB7676;--1:#9E5252"> </span><span style="--0:#80A665;--1:#4B7231">create</span><span style="--0:#8B8B8B;--1:#686868">({</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#818F81FE;--1:#636B63">// 其他配置</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#B8A965;--1:#786713">trackHeight</span><span style="--0:#8B8B8B;--1:#686868">: </span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">20%</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#B8A965;--1:#786713">plugin</span><span style="--0:#8B8B8B;--1:#686868">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#80A665;--1:#4B7231">willRender</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#BD976A;--1:#876037">ref</span><span style="--0:#8B8B8B;--1:#686868">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#BD976A;--1:#876037">console</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">log</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#BD976A;--1:#876037">ref</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#BD976A;--1:#876037">type</span><span style="--0:#8B8B8B;--1:#686868">); </span><span style="--0:#818F81FE;--1:#636B63">// 即将要渲染的弹幕类型</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#BD976A;--1:#876037">console</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">log</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#BD976A;--1:#876037">ref</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#BD976A;--1:#876037">danmaku</span><span style="--0:#8B8B8B;--1:#686868">); </span><span style="--0:#818F81FE;--1:#636B63">// 即将要渲染的弹幕实例</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#BD976A;--1:#876037">ref</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#BD976A;--1:#876037">prevent</span><span style="--0:#8B8B8B;--1:#686868"> = </span><span style="--0:#55987B;--1:#1E754F">true</span><span style="--0:#8B8B8B;--1:#686868">; </span><span style="--0:#818F81FE;--1:#636B63">// 设置为 true 将阻止渲染，可以在这里做弹幕过滤工作</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#55987B;--1:#1E754F">return</span><span style="--0:#8B8B8B;--1:#686868"> </span><span style="--0:#BD976A;--1:#876037">ref</span><span style="--0:#8B8B8B;--1:#686868">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">    </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">  </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8B8B8B;--1:#686868">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { create } from &#x27;danmu&#x27;;// 在此处创建一个 manager 实例，如果不传递则会使用默认的配置// plugin 参数是需要特殊注意的，他是在创建 manager 时默认的插件const manager = create({  // 其他配置  trackHeight: &#x27;20%&#x27;,  plugin: {    willRender(ref) {      console.log(ref.type); // 即将要渲染的弹幕类型      console.log(ref.danmaku); // 即将要渲染的弹幕实例      ref.prevent = true; // 设置为 true 将阻止渲染，可以在这里做弹幕过滤工作      return ref;    },  },});"><div></div></button></div></figure></div>
<h3 id="3-挂载并渲染">3. 挂载并渲染</h3>
<p>当我们创建好了一个 <code dir="auto">manager</code> 的时候就可以挂载到某个具体的节点上并渲染，实际上 <code dir="auto">manager</code> 内部会启动一个定时器来轮询将内存区的弹幕来渲染出来，而轮询的时间是交由你来控制的（如果没有通过配置传递，会有一个默认的值 <strong><code dir="auto">500ms</code></strong>，详见配置章节）。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#CB7676;--1:#9E5252">const </span><span style="--0:#BD976A;--1:#876037">container</span><span style="--0:#CB7676;--1:#9E5252"> </span><span style="--0:#8B8B8B;--1:#686868">=</span><span style="--0:#CB7676;--1:#9E5252"> </span><span style="--0:#BD976A;--1:#876037">document</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">getElementById</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">container</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#818F81FE;--1:#636B63">// 挂载，然后开始渲染</span></div></div><div class="ec-line"><div class="code"><span style="--0:#BD976A;--1:#876037">manager</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">mount</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#BD976A;--1:#876037">container</span><span style="--0:#8B8B8B;--1:#686868">).</span><span style="--0:#80A665;--1:#4B7231">startPlaying</span><span style="--0:#8B8B8B;--1:#686868">();</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const container = document.getElementById(&#x27;container&#x27;);// 挂载，然后开始渲染manager.mount(container).startPlaying();"><div></div></button></div></figure></div>
<h3 id="4-发送普通弹幕">4. 发送普通弹幕</h3>
<p>当前面的一些工作准备完成之后，就可以发送弹幕了。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#818F81FE;--1:#636B63">// value 的类型可以在创建 manager 的时候通过范型来约定，可以看后面的小节</span></div></div><div class="ec-line"><div class="code"><span style="--0:#BD976A;--1:#876037">manager</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">push</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">弹幕内容</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// value 的类型可以在创建 manager 的时候通过范型来约定，可以看后面的小节manager.push(&#x27;弹幕内容&#x27;);"><div></div></button></div></figure></div>
<p>但是通过 <a href="../../reference/manager-api/#push"><strong><code dir="auto">push</code></strong></a> 方法来发送的弹幕可能会受到弹幕算法的影响，不会立即渲染，想象一些往一个数组里面 push 一个数据，但是消费是从数组最前端拿出数据消费的。我们可以换一个 <a href="../../reference/manager-api/#unshift"><strong><code dir="auto">unshift</code></strong></a> 方法来发送弹幕。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#818F81FE;--1:#636B63">// 在下一次渲染轮询中，立即渲染</span></div></div><div class="ec-line"><div class="code"><span style="--0:#BD976A;--1:#876037">manager</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">unshift</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">弹幕内容</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 在下一次渲染轮询中，立即渲染manager.unshift(&#x27;弹幕内容&#x27;);"><div></div></button></div></figure></div>
<p>我们在初始化 <code dir="auto">manager</code> 的时候，可以通过 <code dir="auto">plugin</code> 属性来传递默认全局插件，他的作用域是对所有的弹幕都生效，而且包含<a href="../../reference/manager-hooks"><strong>全局</strong></a>和<a href="../../reference/danmaku-hooks"><strong>弹幕</strong></a>两种类型的钩子。</p>
<p>不过我们在发送弹幕的时候，也可以传递弹幕自己的插件，他不包含全局钩子，<strong>作用域只对当前渲染的弹幕生效</strong>，如果你需要的话，这会让你更好的来控制当前要渲染的这个弹幕。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#BD976A;--1:#876037">manager</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">push</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">弹幕内容</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">,</span><span style="--0:#DBD7CAEE;--1:#393A34"> </span><span style="--0:#8B8B8B;--1:#686868">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#818F81FE;--1:#636B63">// ... 其他属性，详情见 push api 文档</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#B8A965;--1:#786713">plugin</span><span style="--0:#8B8B8B;--1:#686868">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#80A665;--1:#4B7231">moveStart</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#BD976A;--1:#876037">danmaku</span><span style="--0:#8B8B8B;--1:#686868">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#818F81FE;--1:#636B63">// moveStart 钩子会在弹幕即将开始运动之前触发，你可以在这里更改弹幕的样式</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#BD976A;--1:#876037">danmaku</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">setStyle</span><span style="--0:#8B8B8B;--1:#686868">(</span><span style="--0:#BD976A;--1:#876037">csskey</span><span style="--0:#8B8B8B;--1:#686868">, </span><span style="--0:#BD976A;--1:#876037">cssValue</span><span style="--0:#8B8B8B;--1:#686868">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">    </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">  </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8B8B8B;--1:#686868">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="manager.push(&#x27;弹幕内容&#x27;, {  // ... 其他属性，详情见 push api 文档  plugin: {    moveStart(danmaku) {      // moveStart 钩子会在弹幕即将开始运动之前触发，你可以在这里更改弹幕的样式      danmaku.setStyle(csskey, cssValue);    },  },});"><div></div></button></div></figure></div>
<h3 id="5-发送高级弹幕">5. 发送高级弹幕</h3>
<p>普通弹幕会受到碰撞，渲染算法的限制，对于那些需要特殊处理的弹幕，例如顶部弹幕，特殊位置的弹幕，则需要通过 <a href="../../reference/manager-api/#pushflexibledanmaku"><strong><code dir="auto">pushFlexibleDanmaku</code></strong></a> 这个 <code dir="auto">API</code> 发送高级弹幕来渲染，高级弹幕不会受到碰撞算法的限制。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#BD976A;--1:#876037">manager</span><span style="--0:#8B8B8B;--1:#686868">.</span><span style="--0:#80A665;--1:#4B7231">pushFlexibleDanmaku</span><span style="--0:#8B8B8B;--1:#686868">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">弹幕内容</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#8B8B8B;--1:#686868">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#B8A965;--1:#786713">id</span><span style="--0:#8B8B8B;--1:#686868">: </span><span style="--0:#4C9A91;--1:#2C7181">1</span><span style="--0:#8B8B8B;--1:#686868">, </span><span style="--0:#818F81FE;--1:#636B63">// 可选参数</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#B8A965;--1:#786713">duration</span><span style="--0:#8B8B8B;--1:#686868">: </span><span style="--0:#4C9A91;--1:#2C7181">1000</span><span style="--0:#8B8B8B;--1:#686868">, </span><span style="--0:#818F81FE;--1:#636B63">// 默认从 manager.options.times 中随机取一个值</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#B8A965;--1:#786713">direction</span><span style="--0:#8B8B8B;--1:#686868">: </span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#C98A7D;--1:#96574A">none</span><span style="--0:#C98A7DE4;--1:#96574AFD">'</span><span style="--0:#8B8B8B;--1:#686868">, </span><span style="--0:#818F81FE;--1:#636B63">// 默认取 manager.options.direction 的值</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#80A665;--1:#4B7231">position</span><span style="--0:#8B8B8B;--1:#686868">: (</span><span style="--0:#BD976A;--1:#876037">danmaku</span><span style="--0:#8B8B8B;--1:#686868">, </span><span style="--0:#BD976A;--1:#876037">box</span><span style="--0:#8B8B8B;--1:#686868">) => {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#818F81FE;--1:#636B63">// 这会让弹幕在容器居中的位置出现，因为 direaction 为 none，所以会静止播放 1s</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#55987B;--1:#1E754F">return</span><span style="--0:#8B8B8B;--1:#686868"> {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">       </span><span style="--0:#B8A965;--1:#655710">x</span><span style="--0:#9f9f9f;--1:#585858">: </span><span style="--0:#cc9185fe;--1:#7f493efe">`</span><span style="--0:#73aa93;--1:#196343">${</span><span style="--0:#cc9185;--1:#7f493e">x</span><span style="--0:#73aa93;--1:#196343">}</span><span style="--0:#cc9185;--1:#7f493e">% - </span><span style="--0:#73aa93;--1:#196343">${</span><span style="--0:#cc9185;--1:#7f493e">danmaku</span><span style="--0:#9f9f9f;--1:#585858">.</span><span style="--0:#85aa6c;--1:#3f6029">getWidth</span><span style="--0:#9f9f9f;--1:#585858">()</span><span style="--0:#cc9185;--1:#7f493e"> </span><span style="--0:#d48c8c;--1:#854545">/</span><span style="--0:#cc9185;--1:#7f493e"> </span><span style="--0:#69aba3;--1:#255f6d">2</span><span style="--0:#73aa93;--1:#196343">}</span><span style="--0:#cc9185fe;--1:#7f493efe">`</span><span style="--0:#9f9f9f;--1:#585858">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">       </span><span style="--0:#B8A965;--1:#655710">y</span><span style="--0:#9f9f9f;--1:#585858">: </span><span style="--0:#cc9185fe;--1:#7f493efe">`</span><span style="--0:#73aa93;--1:#196343">${</span><span style="--0:#cc9185;--1:#7f493e">y</span><span style="--0:#73aa93;--1:#196343">}</span><span style="--0:#cc9185;--1:#7f493e">% - </span><span style="--0:#73aa93;--1:#196343">${</span><span style="--0:#cc9185;--1:#7f493e">danmaku</span><span style="--0:#9f9f9f;--1:#585858">.</span><span style="--0:#85aa6c;--1:#3f6029">getHeight</span><span style="--0:#9f9f9f;--1:#585858">()</span><span style="--0:#cc9185;--1:#7f493e"> </span><span style="--0:#d48c8c;--1:#854545">/</span><span style="--0:#cc9185;--1:#7f493e"> </span><span style="--0:#69aba3;--1:#255f6d">2</span><span style="--0:#73aa93;--1:#196343">}</span><span style="--0:#cc9185fe;--1:#7f493efe">`</span><span style="--0:#9f9f9f;--1:#585858">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">      </span></span><span style="--0:#8B8B8B;--1:#686868">};</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">    </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#B8A965;--1:#786713">plugin</span><span style="--0:#8B8B8B;--1:#686868">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#818F81FE;--1:#636B63">// plugin 参数是可选的，具体可以参考普通弹幕的钩子，这里是一样的</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">    </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#8B8B8B;--1:#686868">  </span></span><span style="--0:#8B8B8B;--1:#686868">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8B8B8B;--1:#686868">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="manager.pushFlexibleDanmaku(  &#x27;弹幕内容&#x27;,  {    id: 1, // 可选参数    duration: 1000, // 默认从 manager.options.times 中随机取一个值    direction: &#x27;none&#x27;, // 默认取 manager.options.direction 的值    position: (danmaku, box) => {      // 这会让弹幕在容器居中的位置出现，因为 direaction 为 none，所以会静止播放 1s      return {       x: &#x60;${x}% - ${danmaku.getWidth() / 2}&#x60;,       y: &#x60;${y}% - ${danmaku.getHeight() / 2}&#x60;,      };    },    plugin: {      // plugin 参数是可选的，具体可以参考普通弹幕的钩子，这里是一样的    },  },);"><div></div></button></div></figure></div> </div> <footer class="sl-flex astro-awxaxxqo"> <div class="meta sl-flex astro-awxaxxqo"> <a href="https://github.com/imtaotao/danmu/edit/main/docs/src/content/docs/zh/guide/getting-started.mdx" class="sl-flex astro-ojcjbias"><svg aria-hidden="true" class="astro-ojcjbias astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path d="M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z"/></svg> 编辑此页</a> <p>最近更新： <time datetime="2024-08-13T11:21:15.000Z">2024年8月13日</time></p> </div> <div class="pagination-links astro-yr7k3wai" dir="ltr"><a href="/danmu/document/zh/guide/typescript-interface/" rel="next" class="astro-yr7k3wai"><div class="astro-yr7k3wai">下一页<svg aria-hidden="true" class="astro-yr7k3wai astro-gaoqc6fi" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> </div><p class="link-title astro-yr7k3wai">TypeScript 类型</p></a></div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>